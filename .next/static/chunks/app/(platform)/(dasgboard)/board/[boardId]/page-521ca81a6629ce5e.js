(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[996],{8157:function(e,t,s){Promise.resolve().then(s.bind(s,7443))},3889:function(e,t,s){"use strict";s.d(t,{X:function(){return i}});var r=s(6764),a=s(3508),n=s(6739);function i(e){let{id:t,errors:s}=e,i=(0,a.useTranslations)();return s?(0,r.jsx)("div",{id:"".concat(t,"-error"),"aria-live":"polite",className:"text-xs mt-2 text-red-500",children:null==s?void 0:s.map(e=>(0,r.jsxs)("div",{className:"flex items-center font-medium p-2 border border-red-500 bg-rose-500/10 rounded-sm",children:[(0,r.jsx)(n.Z,{className:"h-4 w-4 mx-1"}),i(e)]},e))}):null}},7236:function(e,t,s){"use strict";s.d(t,{y:function(){return f}});var r=s(6764),a=s(2049),n=s(8474),i=s(7481);let o=i.forwardRef((e,t)=>{let{className:s,type:n,...i}=e;return(0,r.jsx)("input",{type:n,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});o.displayName="Input";var l=s(3889),d=s(174);let c=(0,s(3935).j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=i.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,r.jsx)(d.f,{ref:t,className:(0,a.cn)(c(),s),...n})});u.displayName=d.f.displayName;let f=(0,i.forwardRef)((e,t)=>{let{id:s,label:i,placeholder:d,disabled:c,required:f,type:m,errors:p,className:x,defaultValue:v="",onBlur:h}=e,{pending:b}=(0,n.useFormStatus)();return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"space-y-1",children:[i?(0,r.jsx)(u,{className:"text-sm font-medium text-black dark:text-white",htmlFor:s,children:i}):null,(0,r.jsx)(o,{onBlur:h,name:s,defaultValue:v,id:s,placeholder:d,disabled:b||c,required:f,type:m,className:(0,a.cn)("text-sm px-2 py-1 h-9",x),ref:t,"aria-describedby":"".concat(s,"-error")})]}),(0,r.jsx)(l.X,{id:s,errors:p})]})});f.displayName="FormInput"},9019:function(e,t,s){"use strict";s.d(t,{O:function(){return o}});var r=s(6764),a=s(8474),n=s(2049),i=s(3713);function o(e){let{disabled:t,className:s,variant:o,children:l}=e,{pending:d}=(0,a.useFormStatus)();return(0,r.jsx)(i.z,{size:"sm",className:(0,n.cn)(s),variant:o,disabled:d||t,type:"submit",children:l})}},6432:function(e,t,s){"use strict";s.d(t,{Am:function(){return u},pm:function(){return f}});var r=s(7481);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function f(){let[e,t]=r.useState(d);return r.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},3713:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(6764),a=s(7481),n=s(4539),i=s(3935),o=s(2049);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef(function(e,t){let{className:s,variant:a,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(l({variant:a,size:i,className:s})),ref:t,...c})});d.displayName="Button"},7443:function(e,t,s){"use strict";s.d(t,{ListContainer:function(){return q}});var r=s(6764),a=s(1686);let n=a.z.object({title:a.z.string({required_error:"title-is-required",invalid_type_error:"title-is-invalid-type"}).min(3,{message:"minimum-length-3-letters"}),boardId:a.z.string()});async function i(e){if(e){let t=await fetch("/api/boards/list/".concat(e));return await t.json()}return null}let o=async e=>{let t=e.get("title"),s=e.get("description"),r=e.get("listId"),a=e.get("order"),n=e.get("boardId"),i=await fetch("/api/boards/list",{method:"POST",body:JSON.stringify({title:t,description:s,listId:r,order:a,boardId:n}),headers:{"Content-type":"application/json; charset=UTF-8"}});if(!i.ok)throw Error("Failed to create a new board");return i.json()};async function l(e,t){let s=await fetch("/api/boards/list/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw Error("Failed to update board");return await s.json()}async function d(e){return(await fetch("/api/boards/list",{method:"DELETE",body:JSON.stringify({id:e})})).json()}var c=s(7236),u=s(9019),f=s(6432),m=s(3713),p=s(2063),x=s(6367),v=s(7528),h=s(8310),b=s(3508),y=s(2761),g=s(7481);let j=e=>{let{children:t}=e;return(0,r.jsx)("li",{className:"shrink-0 h-full w-[272px] select-none bg-white dark:bg-black bg-opacity-35 dark:bg-opacity-75 p-4 rounded-md",children:t})};function N(){let e=(0,y.useParams)(),t=(0,b.useTranslations)(),[s,a]=(0,g.useState)(!1),i=(0,p.NL)(),l=(0,g.useRef)(null),d=(0,g.useRef)(null),N=(0,x.D)({mutationFn:e=>o(e),onSuccess:e=>{i.invalidateQueries({queryKey:["list"]}),a(!1),(0,f.Am)({description:t("your-list-has-been-created-successfully")})},onError:()=>{(0,f.Am)({description:t("database-error"),variant:"destructive"})}});return s?(0,r.jsx)(j,{children:(0,r.jsxs)("form",{ref:l,className:"w-full",onSubmit:s=>{s.preventDefault();let r=new FormData(s.target),a=r.get("title"),i=n.pick({title:!0}).safeParse({title:a});if(!i.success){var o,l,d;(0,f.Am)({description:t(null===(d=i.error)||void 0===d?void 0:null===(l=d.flatten().fieldErrors)||void 0===l?void 0:null===(o=l.title)||void 0===o?void 0:o[0]),variant:"destructive"});return}r.append("boardId",e.boardId),N.mutate(r)},children:[(0,r.jsx)(c.y,{ref:d,className:"focus-visible:outline-none focus-visible:ring-transparent",placeholder:t("list-title"),id:"title",type:"text"}),(0,r.jsxs)("div",{className:"flex gap-x-2 items-center my-2",children:[(0,r.jsx)(u.O,{children:t("add")}),(0,r.jsx)(m.z,{variant:"destructive",size:"sm",onClick:()=>a(!1),children:(0,r.jsx)(v.Z,{className:"w-4 h-4"})})]})]})}):(0,r.jsx)(j,{children:(0,r.jsxs)(m.z,{onClick:()=>{a(!0),setTimeout(()=>{var e,t;null===(e=d.current)||void 0===e||e.focus(),null===(t=d.current)||void 0===t||t.select()})},className:"w-full",children:[t("add-a-list"),(0,r.jsx)(h.Z,{className:"mx-2 h-5 w-5"})]})})}var w=s(7036),S=s(3422),T=s(4552),k=s(9473),A=s(2326),z=s(2049);let E=S.fC,_=S.xz;S.ZA,S.Uv,S.Tr,S.Ee,g.forwardRef((e,t)=>{let{className:s,inset:a,children:n,...i}=e;return(0,r.jsxs)(S.fF,{ref:t,className:(0,z.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...i,children:[n,(0,r.jsx)(T.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=S.fF.displayName,g.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(S.tu,{ref:t,className:(0,z.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=S.tu.displayName;let O=g.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...n}=e;return(0,r.jsx)(S.Uv,{children:(0,r.jsx)(S.VY,{ref:t,sideOffset:a,className:(0,z.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})})});O.displayName=S.VY.displayName,g.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(S.ck,{ref:t,className:(0,z.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...n})}).displayName=S.ck.displayName,g.forwardRef((e,t)=>{let{className:s,children:a,checked:n,...i}=e;return(0,r.jsxs)(S.oC,{ref:t,className:(0,z.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:n,...i,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(S.wU,{children:(0,r.jsx)(k.Z,{className:"h-4 w-4"})})}),a]})}).displayName=S.oC.displayName,g.forwardRef((e,t)=>{let{className:s,children:a,...n}=e;return(0,r.jsxs)(S.Rk,{ref:t,className:(0,z.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(S.wU,{children:(0,r.jsx)(A.Z,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=S.Rk.displayName;let R=g.forwardRef((e,t)=>{let{className:s,inset:a,...n}=e;return(0,r.jsx)(S.__,{ref:t,className:(0,z.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...n})});R.displayName=S.__.displayName;let I=g.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(S.Z0,{ref:t,className:(0,z.cn)("-mx-1 my-1 h-px bg-muted",s),...a})});function D(e){let{data:t,onAddCard:s}=e,a=(0,b.useTranslations)(),n=(0,p.NL)(),i=(0,x.D)({mutationFn:d,onSuccess:()=>{n.invalidateQueries({queryKey:["list"]}),(0,f.Am)({description:a("your-list-has-been-deleted-successfully")})},onError:e=>{(0,f.Am)({description:a("failed-to-delete-list"),variant:"destructive"})}});return(0,r.jsxs)(E,{children:[(0,r.jsx)(_,{asChild:!0,children:(0,r.jsx)(m.z,{size:"sm",variant:"ghost",children:(0,r.jsx)(w.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(O,{className:"w-46",children:[(0,r.jsx)(R,{children:(0,r.jsx)(m.z,{className:"w-full",size:"sm",variant:"ghost",children:a("add-card")})}),(0,r.jsx)(I,{}),(0,r.jsx)(R,{children:(0,r.jsxs)(m.z,{onClick:()=>i.mutate(t.id),className:"w-full",size:"sm",variant:"ghost",children:[a("delete-card")," "]})})]})]})}function C(e){let{data:t}=e,[s,a]=(0,g.useState)(!1),i=(0,g.useRef)(null),o=(0,g.useRef)(null),d=(0,p.NL)(),u=(0,b.useTranslations)(),v=(0,x.D)({mutationFn:e=>l(t.id,e),onSuccess:e=>{d.invalidateQueries({queryKey:["list"]}),a(!1),(0,f.Am)({description:u("your-list-has-been-edited-successfully")})},onError:()=>{(0,f.Am)({description:u("database-error"),variant:"destructive"})}});return s?(0,r.jsx)("form",{ref:i,className:"gap-3 flex items-center w-full",onSubmit:e=>{e.preventDefault();let s=new FormData(e.target).get("title"),r=n.pick({title:!0}).safeParse({title:s});if(!r.success){var i,o,l;(0,f.Am)({description:u(null===(l=r.error)||void 0===l?void 0:null===(o=l.flatten().fieldErrors)||void 0===o?void 0:null===(i=o.title)||void 0===i?void 0:i[0]),variant:"destructive"});return}if(t.title===s.trim()){a(!1);return}v.mutate({title:s})},children:(0,r.jsx)(c.y,{ref:o,onBlur:()=>{var e;return null===(e=i.current)||void 0===e?void 0:e.requestSubmit()},className:"focus-visible:outline-none focus-visible:ring-transparent",label:u("list-title"),id:"title",type:"text",defaultValue:t.title})}):(0,r.jsxs)("div",{className:"px-2 text-sm flex justify-between items-center gap-x-2",children:[(0,r.jsx)(m.z,{onClick:()=>{a(!0),setTimeout(()=>{var e,t;null===(e=o.current)||void 0===e||e.focus(),null===(t=o.current)||void 0===t||t.select()})},size:"sm",children:t.title}),(0,r.jsx)(D,{data:t,onAddCard:()=>console.log("add card")})]})}function F(e){let{data:t,index:s}=e;return(0,r.jsx)(j,{children:(0,r.jsx)(C,{data:t})})}I.displayName=S.Z0.displayName;var Z=s(7486);function q(e){let{boardId:t}=e,{data:s,error:a,isLoading:n}=(0,Z.a)({queryKey:["list",t],queryFn:()=>i(t),enabled:!!t});return(0,r.jsxs)("ol",{className:"flex gap-x-3 h-full",children:[(null==s?void 0:s.length)>0&&(null==s?void 0:s.map((e,t)=>(0,r.jsx)(F,{data:e,index:t},e.id))),(0,r.jsx)(N,{}),(0,r.jsx)("div",{className:"flex-shrink-0 w-1"})]})}},2049:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(7090),a=s(9186);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}}},function(e){e.O(0,[701,145,606,931,982,485,486,833,677,14,744],function(){return e(e.s=8157)}),_N_E=e.O()}]);